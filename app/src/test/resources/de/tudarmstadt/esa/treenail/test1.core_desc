InstructionSet Test1 {
  architectural_state {
    register unsigned<32> X[32] [[is_main_reg]];
    register unsigned<17> Y;
  }

  instructions {
    Inst1 {
      encoding: imm[19:0] :: rd[4:0] :: 7'b0000010;
      behavior: {
        unsigned<32> x = imm;
        unsigned<32> y = Y;
        X[rd] = x;
        X[rd] = y;
      }
    }

    Inst2 {
      encoding: imm[19:0] :: rd[4:0] :: 7'b0000010;
      behavior: {
        X[rd] = (unsigned) (imm + 42 - 1 * 3 / 7 % 15);
        signed<100> xxx = imm & 20'hFFFFF | 0 ^ 20'hCCCCC << 5 >> 17;
        X[rd] = (unsigned<32>) (xxx + 1);
      }
    }

    Inst3 {
      encoding: imm[19:0] :: rd[4:0] :: 7'b0000010;
      behavior: {
        X[rd] = imm > 0 | (unsigned)(-imm) | !imm | ~imm;
      }
    }

    Inst4 {
      encoding: imm[19:0] :: rd[4:0] :: 7'b0000010;
      behavior: {
        unsigned<3> idx = 1;
        X[rd] = imm[2] + imm[idx];
        X[rd] = X[imm[5:1]];
        idx[0] = 1;
        idx[0:1] = 3'b11;
        Y[7] = imm[7];
        Y[16:4] = 3'd5;
      }
    }
  }
}

